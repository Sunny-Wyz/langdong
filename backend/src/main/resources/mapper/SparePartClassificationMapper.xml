<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.langdong.spare.mapper.SparePartClassificationMapper">

    <resultMap id="ClassificationResultMap" type="com.langdong.spare.entity.SparePartClassification">
        <id property="id" column="id"/>
        <result property="sparePartId" column="spare_part_id"/>
        <result property="abcCategory" column="abc_category"/>
        <result property="xyzCategory" column="xyz_category"/>
        <result property="combinationCode" column="combination_code"/>
        <result property="abcScore" column="abc_score"/>
        <result property="xyzCv" column="xyz_cv"/>
        <result property="predictedDemand" column="predicted_demand"/>
        <result property="costScore" column="cost_score"/>
        <result property="criticalScore" column="critical_score"/>
        <result property="leadTimeScore" column="lead_time_score"/>
        <result property="difficultyScore" column="difficulty_score"/>
        <result property="isManualAdjusted" column="is_manual_adjusted"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>

    <select id="findAll" resultMap="ClassificationResultMap">
        SELECT * FROM spare_part_classification
    </select>

    <select id="findBySparePartId" resultMap="ClassificationResultMap">
        SELECT * FROM spare_part_classification WHERE spare_part_id = #{sparePartId}
    </select>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO spare_part_classification (spare_part_id, abc_category, xyz_category, combination_code, abc_score, xyz_cv, predicted_demand, cost_score, critical_score, lead_time_score, difficulty_score, is_manual_adjusted)
        VALUES (#{sparePartId}, #{abcCategory}, #{xyzCategory}, #{combinationCode}, #{abcScore}, #{xyzCv}, #{predictedDemand}, #{costScore}, #{criticalScore}, #{leadTimeScore}, #{difficultyScore}, #{isManualAdjusted})
    </insert>

    <update id="update">
        UPDATE spare_part_classification
        <set>
            <if test="abcCategory != null">abc_category = #{abcCategory},</if>
            <if test="xyzCategory != null">xyz_category = #{xyzCategory},</if>
            <if test="combinationCode != null">combination_code = #{combinationCode},</if>
            <if test="abcScore != null">abc_score = #{abcScore},</if>
            <if test="xyzCv != null">xyz_cv = #{xyzCv},</if>
            <if test="predictedDemand != null">predicted_demand = #{predictedDemand},</if>
            <if test="costScore != null">cost_score = #{costScore},</if>
            <if test="criticalScore != null">critical_score = #{criticalScore},</if>
            <if test="leadTimeScore != null">lead_time_score = #{leadTimeScore},</if>
            <if test="difficultyScore != null">difficulty_score = #{difficultyScore},</if>
            <if test="isManualAdjusted != null">is_manual_adjusted = #{isManualAdjusted},</if>
        </set>
        WHERE spare_part_id = #{sparePartId}
    </update>
    
    <delete id="deleteBySparePartId">
        DELETE FROM spare_part_classification WHERE spare_part_id = #{sparePartId}
    </delete>

    <delete id="deleteAll">
        DELETE FROM spare_part_classification
    </delete>

</mapper>
